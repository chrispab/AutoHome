var Timer timer = null

rule "motionEye Control ON"
when
    Item MECam1 changed to ON
then
    MERelay1.postUpdate(ON)
    if(timer !== null) {
        timer.cancel()
        timer = null}
end

rule "motionEye Control OFF"
when
    Item MECam1 changed to OFF
then
    val results = executeCommandLine ("sudo -u openhab ssh pi@10.0.0.189 sudo /sbin/shutdown now")
    if(timer === null) {
        timer = createTimer(now.plusSeconds(30)) [|
            MERelay1.postUpdate(OFF)
            timer = null]}
end