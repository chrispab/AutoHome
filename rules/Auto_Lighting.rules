rule "if dark in morning turn on conservatory lights"
when
    Time cron "0 00 07 ? * * *"
//    Time cron "0 53 17 ? * * *"
then
    logInfo("RULE", "morning lighting if dark")

    if (BridgeLightSensorState.state == OFF) {
        logInfo("RULE", "morning - switching on lights")
        {sendCommand(socketG2_1, ON)} //con lights
        {postUpdate(socketG2_1, ON)}
        {sendCommand(socketG1_4, ON)} // d room lights
        {postUpdate(socketG1_4, ON)}
        {sendCommand(gIkeaLights, ON)} // d room lights
        //MyColorItem.sendCommand(new PercentType(50))
        gIkeaLights.sendCommand(new PercentType(50))
        gIkeaLights.postUpdate(new PercentType(50))
        //{postUpdate(gIkeaLights, ON)}
    }
end


rule "turn off lights (if on) when daylight rises"
when
    Item BridgeLightSensorState changed from OFF to ON 
then
    logInfo("RULE", "Light sensor detected - turn off lights when dark to light detected")
        {sendCommand(socketG2_1, OFF)} //con lights
        {postUpdate(socketG2_1, OFF)}
        {sendCommand(socketG1_4, OFF)} // d room lights
        {postUpdate(socketG1_4, OFF)}
        //{sendCommand(gIkeaLights, OFF)} // d room lights
        gIkeaLights.sendCommand(new PercentType(0))
        gIkeaLights.postUpdate(new PercentType(0))
        gDimmerBulbs.sendCommand(new PercentType(0))
        gColourBulbs.sendCommand(new HSBType(0,0,0))
        gIkeaLights.sendCommand(OFF)
        gIkeaLights.postUpdate(OFF)
        //{postUpdate(gIkeaLights, OFF)}
end


rule "Light sensor Turn ON lights"
when
    Item BridgeLightSensorState changed from ON to OFF
then
    logInfo("RULE", "Light sensor detected - gone dark - Turn on lights")
    //turn on
    {sendCommand(socketG2_1, ON)} //con lights
    {postUpdate(socketG2_1, ON)}
    {sendCommand(socketG1_3, ON)} //landinf lights
    {postUpdate(socketG1_3, ON)}
    {sendCommand(socketG1_4, ON)} //DR lights
    {postUpdate(socketG1_4, ON)} 
    gIkeaLights.sendCommand(new PercentType(50))
    gIkeaLights.postUpdate(new PercentType(50))   
    // {sendCommand(gIkeaLights, ON)} //
    // {postUpdate(gIkeaLights, ON)} 
end

//switch on xmas lights when eslie gets home
rule "switch on lights when elsie gets home"
when
    // Item ElsieSIPhone_Online changed from OFF to ON
    // or
    // Item JoIPhone_Online changed from OFF to ON
    // or
    Item ChrisGalaxyS5_Online changed from OFF to ON
then
    if (now.getHourOfDay == 15){
        logInfo("RULE", "elsies or c or j phone connected to wifi @ 3-4 pm")
        sendCommand(gChristmasLights, ON)
        sendCommand(gFairyLights, ON)
    }
end
