import org.openhab.model.script.actions.Timer


rule "06:16 lights on Jo"
when
    Time cron "0 16 06 ? * MON-FRI *"
then
    logInfo("RULE", "Morning Jo!")
    sendCommand(socketG1_3, ON)
    sendCommand(socketG1_4, ON)
    sendCommand(socketG2_1, ON)
end

rule "Delayed Off Switch"
    when
        Item Delayed_OFF_SW changed to OFF
    then
        timer = createTimer(now.plusSeconds(240), [|
            {sendCommand(socketG1_4, OFF)}
            {postUpdate(socketG1_4, OFF)}
        ])
end

rule "Conservatory Cooling Fan"
when
    Item CT_Temperature changed
then
        var Number setpoint = 25.0 //CT_Heating_Setpoint.state as DecimalType
        var Number turnOnTemp = setpoint //- 0.2// calculate the turn on/off temperatures
        var Number turnOffTemp = setpoint //+ 0.1
        var Number temp = CT_Temperature.state as DecimalType // get the current temperature

        if (temp < turnOffTemp) {  // determine whether we need to turn on/off the heater
            socketG3_2.sendCommand(OFF)
            socketG3_2.postUpdate(OFF)
        }else if (temp >= turnOnTemp) {
            socketG3_2.sendCommand(ON)
            socketG3_2.postUpdate(ON)
            logInfo("RULE", "ooo hot - turn on fan: " + temp)
        }
end



