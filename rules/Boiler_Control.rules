rule "check for Boiler Demand changed"
when
    Member of gRoomHeaterStates received command
then
    logInfo("RuleExamples", "The item " + triggeringItem.name + " changed state from " + triggeringItem.previousState + " to " + triggeringItem.state)
    // logInfo("Boiler_Control RULE", "here we go=========" )
    if ( gRoomHeaterStates.state ==  NULL ) {
            logInfo("Boiler_Control RULE", "?? ?? ??Heating state detected with NULL VALUE" + gRoomHeaterStates)
            gRoomHeaterStates.members.forEach[ heatings | 
                logInfo("Boiler_Control RULE", "--------->Heating state detected with val = " + heatings.name + heatings.state) 
            ] 
        }
    if ( gAnyRoomHeaterOn.state == ON ) {//if any rooms want heat - turn on boiler
        logInfo("Boiler RULE", "Sending boiler ON command" )
        gRoomHeaterStates.members.forEach[ heatings | 
            logInfo("Boiler_Control RULE", "--------->Heater state detected ON : " + heatings.name + heatings.state) 
        ] 
        Boiler_Control.sendCommand(ON)
    }
    else { // no rooms want heat so turn off boiler
        logInfo("Boiler RULE", "Sending boiler OFF command" )
        gRoomHeaterStates.members.forEach[ heatings | 
            logInfo("Boiler_Control RULE", "--------->Heater state detected OFF : " + heatings.name + heatings.state) 
        ] 
        Boiler_Control.sendCommand(OFF)
    }
end
